<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=3">
        <title>ViewportDetector.js</title>
        <meta name="description" content="Javascript viewport element visibility library">
        <meta name="google" content="notranslate">
        <link href="./example.css" media="screen" rel="stylesheet" type="text/css"/>
        <link href="./higlight/default.css" media="screen" rel="stylesheet" type="text/css"/>
    </head>
    <body>

        <section class="header">
            <div class="header_content">
                <img src="./logo.png" width="100" height="100" />
                <h1>ViewportDetector.js</h1>
                <p class="legend">Javascript viewport element visibility library</p>
                <div><a class="github-button" href="https://github.com/Spope/ViewportDetector.js/" data-size="large" aria-label="Download Spope/ViewportDetector.js on GitHub">Download</a></div>
            </div>
        </section>
        <section class="description">
            <div class="description_content">
                <p class="section_content">ViewportDetector is a <strong>lightweight</strong> (1kb Gzipped) dependancy free library to detect if an element is shown in the viewport (or another container) or not. It use <strong>requestAnimationFrame</strong> API to be without any impact on the performance.</p>

                <h2 class="section_content">Installation</h2>
                <p class="section_content">Just include the minified version of ViewportDetector.js on your website :</p>
                <div class="pre_wrapper">
                    <pre><code class="html">&lt;script src=&quot;viewportdetector/build/viewportdetector.min.js&quot;&gt;&lt;/script&gt;</code></pre>
                </div>

                <h2 class="section_content">Usage</h2>
                <p class="section_content">To use viewport detector, create a new instance : </p>

                <div class="pre_wrapper">
                    <pre><code class="javascript">var detector = new ViewportDetector(
    selector: '.element',
    callback: myCallback
);</code></pre>
                </div>

                <h2 class="section_content">Parameters</h2>

                <p class="section_content">Here is the list of available parameters : </p>
                <table>
                    <thead>
                        <tr>
                            <td>Name</td>
                            <td>Default value</td>
                            <td>Description</td>
                        </tr>
                    </thead>
                    <tr>
                        <td>callback</td>
                        <td>Null</td>
                        <td>Callback to execute on visibility change. Callback receive <strong>2 parameters</strong>, the DOMElement and the Visibility (boolean). <strong>Required</strong></td>
                    </tr>
                    <tr>
                        <td>selector</td>
                        <td>Null</td>
                        <td>Element selector to observe. <strong>Required</strong></td>
                    </tr>
                    <tr>
                        <td>opts.marge</td>
                        <td>Null</td>
                        <td>Marge to expand or reduce element detection size.</td>
                    </tr>
                    <tr>
                        <td>opts.container</td>
                        <td>window</td>
                        <td>Container selector within detection should happen.</td>
                    </tr>
                </table>

                <h2 class="section_content">API</h2>

                <p class="section_content">Here is the list of available APIs : </p>
                <table>
                    <thead>
                        <td>Name</td>
                        <td>Description</td>
                    </thead>
                    <tr>
                        <td>add(selector, callback, opts)</td>
                        <td>Add en element to detect into a instance of ViewportDetector.</td>
                    </tr>
                </table>
            </div>
        </section>

        <section class="example">
            <h2 class="section_content">Example</h2>
            <p class="section_content">Default parameters : </p>
            <div class="pre_wrapper">
                <pre><code class="javascript">var cb = function(el, visibility) {
    if (visibility) {
        el.classList.add('show');
    } else {
        el.classList.remove('show');
    }
    document.querySelector('.visibility').innerHTML = visibility ? 'true' : 'false';
}
var example = new ViewportDetector('.element', cb, {container: '.demo1'});</code></pre>
            </div>

            <div class="container">
                <div class="state">
                    <p>Visibility</p>
                    <p class="visibility1">false</p>
                </div>
                <div class="demo demo1">
                    <h2>Scroll down ...</h2>
                    <div class="element element1"></div>
                </div>
            </div>

            <p class="section_content">With marge parameter, element is detected X pixels before appearing into viewport : </p>
            <div class="pre_wrapper">
                <pre><code class="javascript">var example = new ViewportDetector('.element', cb, {marge: 100, container: '.demo2'});</code></pre>
            </div>

            <div class="container">
                <div class="state">
                    <p>Visibility</p>
                    <p class="visibility2">false</p>
                </div>
                <div class="demo demo2">
                    <h2>Scroll down ...</h2>
                    <div class="element element2"></div>
                </div>
            </div>

            <p class="section_content">Multiple elements : </p>
            <div class="pre_wrapper">
                <pre><code class="javascript">var example = new ViewportDetector([
    {
        selector: '.element_1',
        callback: cb1,
        opts: {container: '.demo3'}
    },
    {
        selector: '.element_2',
        callback: cb2,
        opts: {
            marge: 100,
            container: '.demo3'
        }
    }
]);

example.add('.element_3', cb3, {container: '.demo3'});</code></pre>
            </div>

            <div class="container">
                <div class="state">
                    <p>Element 1</p>
                    <p class="visibility visibility_1">false</p>

                    <p>Element 2</p>
                    <p class="visibility visibility_2">false</p>

                    <p>Element 3</p>
                    <p class="visibility visibility_3">false</p>
                </div>
                <div class="demo demo3">
                    <h2>Scroll down ...</h2>
                    <div class="element element_1"></div>
                    <div class="element element_2"></div>
                    <div class="element element_3"></div>
                </div>
            </div>

        </section>

        <section class="footer">
            <p class="section_content">Made by <a href="https://spope.fr" title="spope.fr">Spope</a> - See on <a href="https://github.com/Spope/ViewportDetector.js" title="Open Github repository">Github</a> - Feel free to contact me on <a href="https://twitter.com/spopila" title="Spopila's Twitter account">Twitter</a></p>
        </section>

        <script async defer src="https://buttons.github.io/buttons.js"></script>
        <script src="./higlight/highlight.pack.js"></script>
        <script src="./viewportdetector.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript">
var cb = function(el, visibility) {
    document.querySelector('.visibility1').innerHTML = visibility ? 'true' : 'false';
    if (visibility) {
        el.classList.add('show');
    } else {
        el.classList.remove('show');
    }
}
var example = new ViewportDetector('.element1', cb, {container: '.demo1'});

//

var example2 = new ViewportDetector('.element2', function(el, visibility) {
    if (visibility) {
        el.classList.add('show');
    } else {
        el.classList.remove('show');
    }
    document.querySelector('.visibility2').innerHTML = visibility ? 'true' : 'false';
}, {marge: 100, container: '.demo2'});

//

var cb1 = function(el, visibility) {
    if (visibility) {
        el.classList.add('show');
    } else {
        el.classList.remove('show');
    }
    document.querySelector('.visibility_1').innerHTML = visibility ? 'true' : 'false';
}
var cb2 = function(el, visibility) {
    if (visibility) {
        el.classList.add('show');
    } else {
        el.classList.remove('show');
    }
    document.querySelector('.visibility_2').innerHTML = visibility ? 'true' : 'false';
}
var cb3 = function(el, visibility) {
    if (visibility) {
        el.classList.add('show');
    } else {
        el.classList.remove('show');
    }
    document.querySelector('.visibility_3').innerHTML = visibility ? 'true' : 'false';
}


var example = new ViewportDetector([
    {
        selector: '.element_1',
        callback: cb1,
        opts: {
            container: '.demo3'
        }
    },
    {
        selector: '.element_2',
        callback: cb2,
        opts: {
            marge: 100,
            container: '.demo3'
        }
    }
]);

example.add('.element_3', cb3, {container: '.demo3'});
</script>
    </body>
</html>


